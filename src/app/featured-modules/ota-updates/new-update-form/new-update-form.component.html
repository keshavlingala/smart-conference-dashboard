<div class="body">
  <h1>OTA Updates</h1>
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb pl-0" style="background-color: transparent;">
      <li class="breadcrumb-item"><a routerLink="/ota-updates">OTA Update</a></li>
      <li class="breadcrumb-item active" aria-current="page">Add New Update</li>
    </ol>
  </nav>

  <form novalidate [formGroup]="updatesForm" (ngSubmit)="onSubmit()">
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="otaName">OTA Name</label>
        <input type="text" class="form-control" formControlName="otaName" />
        <mat-error *ngIf="
            updatesForm.get('otaName').hasError('required') &&
            updatesForm.get('otaName').touched
          ">OTA Name is required</mat-error>
      </div>
      <div class="form-group col-md-6">
        <label for="deviceType">Device Type</label>
        <select id="inputState" class="form-control" formControlName="deviceType">
          <option selected>1</option>
          <option>2</option>
          <option>3</option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="otaVersion">OTA Version</label>
        <input type="text" class="form-control" formControlName="otaVersion" />
        <mat-error *ngIf="
            updatesForm.get('otaVersion').hasError('required') &&
            updatesForm.get('otaVersion').touched
          ">OTA Version is required</mat-error>
      </div>
      <div class="form-group col-md-6">
        <label for="description">Description</label>
        <input type="text" class="form-control" formControlName="description" />
        <mat-error *ngIf="
            updatesForm.get('description').hasError('required') &&
            updatesForm.get('description').touched
          ">Description is required</mat-error>
      </div>
    </div>
    <div class="form-row">
      <label for="col uploadFile">Upload File</label>
    </div>
    <div class="form-row mt-1">

      <div class="col-md-3 ml-0">
        <div class="container" appDnd (fileDropped)="onFileDropped($event)">

          <input type="file" #fileDropRef id="fileDropRef" multiple (change)="fileBrowseHandler($event.target.files)" />

          <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 84.000000 51.000000"
            preserveAspectRatio="xMidYMid meet">
            <metadata>
              Created by potrace 1.10, written by Peter Selinger 2001-2011
            </metadata>
            <g transform="translate(0.000000,51.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
              <path d="M340 414 c0 -35 -1 -36 -30 -32 l-30 5 0 -149 0 -148 138 0 137 0 -5
       117 c-3 65 -3 146 0 181 l5 62 -107 0 -108 0 0 -36z m190 -42 c0 -48 -2 -53
       -13 -38 -10 14 -28 18 -88 18 -84 1 -95 4 -78 24 6 8 9 14 5 14 -4 0 0 10 8
       23 14 20 21 22 90 19 l76 -4 0 -56z m-208 -24 c-13 -16 -14 -171 -1 -163 5 4
       9 2 9 -4 0 -5 -5 -11 -10 -13 -6 -2 26 -2 71 1 61 2 84 0 91 -10 8 -11 9 -10
       4 3 -3 10 1 18 12 21 9 3 -24 5 -75 6 -50 0 -95 6 -98 11 -9 15 178 13 193 -2
       16 -16 16 -78 0 -78 -7 0 -56 -3 -109 -5 -71 -4 -99 -2 -106 7 -6 8 -8 58 -5
       126 4 90 7 112 20 112 10 0 12 -3 4 -12z m179 -31 c-12 -12 -172 -4 -169 8 2
       6 28 9 59 7 31 -1 67 2 80 6 25 10 46 -5 30 -21z m17 -27 c18 0 15 -47 -4 -54
       -27 -10 -194 -7 -194 4 0 6 40 10 100 10 60 0 100 4 100 10 0 6 -38 10 -94 10
       -82 0 -116 7 -102 21 4 3 60 3 194 -1z" />
              <path d="M297 423 c-12 -11 -8 -23 8 -23 8 0 15 7 15 15 0 16 -12 20 -23 8z" />
              <path d="M161 366 c-19 -11 -21 -14 -7 -19 9 -4 16 -2 16 3 0 17 18 11 24 -7
       2 -10 7 -28 11 -41 6 -20 0 -26 -59 -52 -76 -35 -76 -35 -76 -14 0 8 4 13 9
       10 5 -3 8 11 7 32 -1 31 2 37 22 40 22 3 32 32 11 32 -5 0 -8 -4 -4 -9 3 -5
       -7 -11 -22 -13 -28 -3 -30 -8 -17 -41 5 -13 1 -20 -15 -24 -26 -7 -23 -18 26
       -118 42 -84 39 -80 55 -68 7 6 31 16 53 23 37 12 54 25 55 42 0 4 -7 5 -15 2
       -8 -4 -12 -10 -9 -15 3 -5 -2 -9 -11 -9 -9 0 -28 -6 -44 -14 -19 -10 -32 -11
       -42 -5 -11 8 -11 12 -1 16 7 2 18 10 25 17 6 6 30 16 52 21 43 11 65 46 50 81
       -10 22 -12 30 -14 45 0 5 -5 8 -10 4 -6 -3 -10 3 -10 12 -1 39 -5 53 -13 53
       -4 0 -7 5 -5 11 3 17 -15 20 -42 5z m76 -108 c0 -7 4 -25 8 -40 6 -23 3 -29
       -24 -42 -16 -9 -36 -16 -42 -16 -7 0 -21 -8 -31 -17 -17 -15 -20 -15 -39 5
       -11 12 -17 26 -14 31 3 5 0 13 -7 17 -8 5 14 20 57 41 77 36 91 39 92 21z" />
              <path d="M160 224 c-30 -13 -47 -24 -38 -24 19 0 108 37 108 45 0 8 -10 5 -70
       -21z" />
              <path d="M165 192 c-47 -18 -50 -20 -43 -27 2 -3 18 1 34 8 16 8 40 19 54 25
       39 17 0 12 -45 -6z" />
              <path d="M652 348 c3 -7 -1 -19 -9 -26 -24 -24 -14 -32 12 -10 28 24 33 48 9
       48 -9 0 -14 -6 -12 -12z" />
              <path d="M690 334 c0 -8 6 -14 13 -12 6 1 25 -1 40 -5 26 -7 28 -11 22 -40 -4
       -18 -11 -36 -15 -40 -4 -5 -39 2 -76 16 -38 13 -75 22 -81 20 -15 -5 -17 -43
       -3 -43 6 0 10 7 10 15 0 8 4 15 8 15 17 0 127 -41 136 -50 15 -15 -6 -12 -47
       5 -42 17 -47 18 -47 7 0 -5 17 -13 37 -18 42 -10 53 -33 28 -58 -9 -9 -13 -16
       -8 -16 5 0 9 -9 10 -20 2 -24 -12 -22 -84 11 -52 23 -53 23 -53 3 0 -11 6 -14
       20 -9 11 3 20 2 20 -3 0 -11 90 -43 101 -36 4 2 13 28 19 56 7 29 16 58 20 63
       4 6 11 26 15 45 4 19 12 42 18 52 14 22 13 23 -50 41 -47 14 -53 14 -53 1z" />
              <path d="M594 316 c-8 -22 3 -33 18 -18 9 9 9 15 0 24 -9 9 -13 7 -18 -6z" />
              <path d="M153 300 c-30 -12 -29 -18 2 -12 14 2 25 8 25 13 0 5 -1 9 -2 8 -2 0
       -13 -4 -25 -9z" />
              <path d="M665 290 c-3 -5 -2 -10 4 -10 5 0 13 5 16 10 3 6 2 10 -4 10 -5 0
       -13 -4 -16 -10z" />
              <path d="M696 272 c-3 -5 9 -9 27 -9 26 -1 28 1 12 7 -27 11 -33 12 -39 2z" />
              <path d="M615 230 c3 -5 10 -10 16 -10 5 0 9 5 9 10 0 6 -7 10 -16 10 -8 0
       -12 -4 -9 -10z" />
              <path d="M573 214 c11 -11 140 -55 145 -49 5 5 -43 25 -62 25 -6 0 -16 4 -21
       9 -12 10 -73 26 -62 15z" />
              <path d="M580 171 c0 -5 12 -11 27 -14 26 -5 26 -4 8 9 -22 16 -35 18 -35 5z" />
              <path d="M650 150 c8 -5 22 -9 30 -9 10 0 8 3 -5 9 -27 12 -43 12 -25 0z" />
              <path d="M668 123 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z" />
              <path d="M300 40 c0 -5 5 -10 10 -10 6 0 10 5 10 10 0 6 -4 10 -10 10 -5 0
       -10 -4 -10 -10z" />
            </g>
          </svg>
          <h3>Drop files here, or <label for="fileDropRef">Browse</label></h3>
        </div>
        <div *ngIf="fileFetchError"  id="file-fetch-error">
          <mat-error>Please upload a file</mat-error>
        </div>
      </div>
      <div class="col-md-1"></div>
      <div class="files-list col-md-4">
        <div class="single-file" *ngFor="let file of files; let i = index">
          <div class="file-icon" style="width: 50px;">
            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px" y="0px" viewBox="0 0 58 58" style="enable-background: new 0 0 58 58;" xml:space="preserve">
              <polygon style="fill: #edeada;" points="51.5,14 37.5,0 6.5,0 6.5,58 51.5,58 " />
              <g>
                <path style="fill: #cec9ae;"
                  d="M16.5,23h25c0.552,0,1-0.447,1-1s-0.448-1-1-1h-25c-0.552,0-1,0.447-1,1S15.948,23,16.5,23z" />
                <path style="fill: #cec9ae;"
                  d="M16.5,15h10c0.552,0,1-0.447,1-1s-0.448-1-1-1h-10c-0.552,0-1,0.447-1,1S15.948,15,16.5,15z" />
                <path style="fill: #cec9ae;"
                  d="M41.5,29h-25c-0.552,0-1,0.447-1,1s0.448,1,1,1h25c0.552,0,1-0.447,1-1S42.052,29,41.5,29z" />
                <path style="fill: #cec9ae;"
                  d="M41.5,37h-25c-0.552,0-1,0.447-1,1s0.448,1,1,1h25c0.552,0,1-0.447,1-1S42.052,37,41.5,37z" />
                <path style="fill: #cec9ae;"
                  d="M41.5,45h-25c-0.552,0-1,0.447-1,1s0.448,1,1,1h25c0.552,0,1-0.447,1-1S42.052,45,41.5,45z" />
              </g>
              <polygon style="fill: #cec9ae;" points="37.5,0 37.5,14 51.5,14 " />
            </svg>
          </div>
          <div class="info">
            <h4 class="name">
              {{ file?.name }}
            </h4>
            <p class="size">
              <!-- {{ formatBytes(file?.size) }} -->
            </p>
            <app-progress [progress]="file?.progress"></app-progress>
          </div>

          <div class="delete" (click)="deleteFile(i)">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18">
              <path fill="#B1B1B1" fill-rule="nonzero"
                d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z" />
            </svg>
          </div>
        </div>
      </div>
      <div class="col-md-4"></div>
    </div>
    <div class="row mt-3">
      <div class="col-4">
        <button type="button" class="btn btn-lg btn-light" style="background-color: #d5d4d4;" routerLink="/ota-updates">
          Back
        </button>
      </div>
      <div class="col-6">
        <button type="submit" [disabled]="updatesForm.invalid" class="btn btn-primary buttonColor btn-lg pr-5 pl-5">
          UPLOAD
        </button>
      </div>
    </div>
  </form>

</div>
